# 🎯 可视化生产调度进度 - 完整指南

## ✅ 成功启动的服务

| 服务 | 地址 | 状态 | 用途 |
|------|------|------|------|
| **Shannon Web UI** | http://localhost:3000 | ✅ 运行中 | 主要可视化界面（推荐） |
| **Temporal UI** | http://localhost:8088 | ✅ 运行中 | 工作流详细信息 |
| **Shannon API** | http://localhost:8080 | ✅ 运行中 | 后端API服务 |
| **Grafana** | http://localhost:3030 | ✅ 运行中 | 性能监控 |

---

## 🌐 方法一：Shannon Web UI （最佳方式）

### 已在VS Code中自动打开
- **地址**: http://localhost:3000
- **特点**: 实时事件流、任务管理、工作流可视化

### 使用步骤：

1. **查看所有任务**
   - 点击左侧菜单 "Sessions" 或 "My Agents"
   - 查看所有正在运行的任务

2. **查找特定 Session**
   - 在搜索框输入session ID（例如：`production-scheduler-1769613839`）
   - 点击进入查看详情

3. **实时监控**
   - 查看每个Agent的执行状态
   - 查看实时日志输出
   - 查看Token使用量和成本

4. **查看结果**
   - 任务完成后查看完整输出
   - 导出结果数据

---

## 📊 方法二：Temporal UI （底层工作流）

### 已在浏览器中打开
- **地址**: http://localhost:8088
- **特点**: 查看底层Temporal工作流执行细节

### 使用步骤：

1. **搜索工作流**
   - 在搜索栏输入 `production-scheduler-` 
   - 或输入完整的 task ID

2. **查看执行历史**
   - 点击工作流查看详细事件时间线
   - 查看每个步骤的输入输出
   - 查看失败原因（如果有）

3. **时间旅行调试**
   - 查看任意时间点的状态
   - 重放工作流执行

---

## 🚀 快速启动新的生产调度任务

### 方式A：使用Python脚本
```powershell
cd c:\Users\Administrator\Documents\GitHub\Shannon\production-scheduler
$env:PYTHONIOENCODING="utf-8"
python main.py
```

### 方式B：使用批处理脚本
```powershell
cd c:\Users\Administrator\Documents\GitHub\Shannon\production-scheduler
.\启动可视化.bat
```

### 自动在Web UI中查看
1. 脚本运行后会显示 Session ID
2. 复制Session ID
3. 在 http://localhost:3000 中搜索该ID
4. 实时查看6个Agent的执行过程：
   - 🤖 订单分析师
   - 🤖 设备规划师  
   - 🤖 物流协调员
   - 🤖 质量检查员
   - 🤖 成本分析师
   - 🤖 总调度师

---

## 📈 方法三：监控仪表板

### Grafana 仪表板
```
URL: http://localhost:3030
用户名: admin
密码: admin
```

**查看内容：**
- 系统性能指标
- API调用次数和延迟
- Token使用统计
- 成本追踪
- 错误率

---

## 🔧 故障排除

### Web UI无法打开
```powershell
# 检查Next.js服务
Get-Process | Where-Object {$_.ProcessName -like "*node*"}

# 重新启动
cd c:\Users\Administrator\Documents\GitHub\Shannon\desktop
npm run dev
```

### 任务不显示
1. 确认Shannon API运行：http://localhost:8080/health
2. 确认任务已提交成功（检查终端输出）
3. 刷新Web UI页面
4. 检查浏览器控制台错误信息

### Temporal UI无法访问
```powershell
# 检查Temporal容器
docker ps | findstr temporal

# 查看日志
docker logs shannon-temporal-1
```

---

## 💡 最佳实践

### 1. 推荐工作流程
1. **启动** → 运行 `python main.py` 
2. **复制** → 复制终端显示的 Session ID
3. **打开** → 在浏览器访问 http://localhost:3000
4. **搜索** → 粘贴 Session ID 查找任务
5. **监控** → 实时查看所有Agent执行状态
6. **分析** → 任务完成后查看详细结果

### 2. 多任务并行监控
- Web UI支持同时监控多个session
- 在"Sessions"页面查看所有活动任务
- 使用标签页分别打开不同的session

### 3. 性能优化建议
- 如果Web UI响应慢，检查Docker容器资源使用
- 使用Grafana查看系统瓶颈
- 对于长时间运行的任务，建议开启Temporal UI同步监控

---

## 🎨 Web UI 功能亮点

### 实时事件流
- SSE (Server-Sent Events) 技术
- 无需刷新页面即可看到更新
- 显示每个Agent的执行进度

### 可视化工作流图
- 使用React Flow展示Agent依赖关系
- 实时更新节点状态（绿色=完成，黄色=进行中，红色=失败）
- 点击节点查看详细信息

### 深色模式
- 支持深色/浅色主题切换
- 护眼设计，适合长时间监控

### 本地数据持久化
- 使用Dexie.js本地数据库
- 离线查看历史任务
- 无需重复请求API

---

## 📞 获取更多帮助

- 📖 文档：https://docs.shannon.run
- 💬 GitHub：https://github.com/Kocoro-lab/Shannon
- 🐛 问题反馈：提交 GitHub Issue
- 📧 邮件支持：查看README.md

---

## 🎯 下一步

现在你可以：
1. ✅ 在 http://localhost:3000 查看实时可视化界面
2. ✅ 运行新的生产调度任务
3. ✅ 在Temporal UI查看底层工作流
4. ✅ 在Grafana查看性能指标

**祝使用愉快！** 🚀
