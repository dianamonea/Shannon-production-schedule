# 🎯 在桌面应用中可视化生产调度过程

## 📋 当前运行状态

**Session ID**: `production-scheduler-1769613594`  
**API地址**: http://localhost:8080  
**状态**: 正在运行 ✅

---

## 🚀 方法一：使用Shannon桌面应用（推荐）

### 步骤 1: 安装并启动桌面应用

如果还没有安装，运行安装程序：
```
c:\Users\Administrator\Documents\GitHub\Shannon\desktop\shannon-setup.exe
```

### 步骤 2: 连接到Shannon后端

1. 打开Shannon桌面应用
2. 确认API地址为：`http://localhost:8080`
3. 点击连接

### 步骤 3: 查看实时进度

**选项A - 通过Session ID查找：**
1. 在搜索栏输入：`production-scheduler-1769613594`
2. 查看所有Agent的执行状态

**选项B - 查看所有任务：**
1. 点击 "My Agents" 或 "Sessions"
2. 找到最新的 `production-scheduler-*` session
3. 点击查看详情

### 步骤 4: 实时监控

你将看到以下Agent按顺序执行：
- 🤖 **Agent 1**: 订单分析师 - 分析订单优先级
- 🤖 **Agent 2**: 设备规划师 - 制定设备分配方案  
- 🤖 **Agent 3**: 物流协调员 - 检查库存和物流
- 🤖 **Agent 4**: 质量检查员 - 质量控制计划
- 🤖 **Agent 5**: 成本分析师 - 成本分析
- 🤖 **Agent 6**: 总调度师 - 生成最终调度方案

---

## 🌐 方法二：使用Web UI（开发模式）

如果桌面应用无法使用，可以启动Web版本：

### 启动Web UI
```powershell
cd c:\Users\Administrator\Documents\GitHub\Shannon\desktop
npm install  # 首次运行需要
npm run dev
```

### 访问
打开浏览器访问：http://localhost:3000

---

## 📊 方法三：使用Temporal UI

查看底层工作流执行详情：

1. 访问：http://localhost:8088
2. 搜索 workflow ID 或 session ID
3. 查看详细的执行时间线和事件流

---

## 🔍 方法四：使用API直接查询

### 查询Session状态
```powershell
Invoke-WebRequest -Uri "http://localhost:8080/api/v1/sessions/production-scheduler-1769613594" -UseBasicParsing | Select-Object -ExpandProperty Content | ConvertFrom-Json | ConvertTo-Json -Depth 10
```

### 实时事件流（SSE）
```powershell
# 在浏览器中打开
http://localhost:8080/api/v1/stream/sse?session_id=production-scheduler-1769613594
```

---

## 📈 监控面板

### Grafana仪表板
- **URL**: http://localhost:3030
- **默认账号**: admin / admin
- **用途**: 查看系统性能指标、token使用量、API调用统计

### Prometheus
- **URL**: http://localhost:9090
- **用途**: 原始指标数据查询

---

## 💡 最佳实践

### 1. 实时监控提示
- ✅ 桌面应用会自动刷新任务状态
- ✅ 绿色表示完成，黄色表示进行中，红色表示失败
- ✅ 点击任务可查看详细日志和结果

### 2. 性能优化
- 如果桌面应用较慢，尝试使用Web UI
- 对于长时间运行的任务，建议开启Temporal UI监控

### 3. 调试建议
- 如果Agent执行失败，查看 Temporal UI 的错误堆栈
- 检查 `docker logs shannon-orchestrator-1` 查看详细日志
- 使用 Grafana 查看是否有资源瓶颈

---

## 🎨 可视化特性

桌面应用提供的可视化功能：
- 📊 **任务流程图**: 查看Agent执行顺序和依赖关系
- 📈 **实时状态**: 每个Agent的当前执行状态
- 📝 **日志流**: 实时查看执行日志
- 🔄 **事件时间线**: 查看所有事件的时间轴
- 💰 **Token使用**: 查看每个Agent的token消耗
- ⏱️ **执行时间**: 每个步骤的耗时统计

---

## 🆘 故障排除

### 桌面应用无法连接
```powershell
# 检查后端服务
docker ps | findstr shannon-gateway

# 测试API
Invoke-WebRequest -Uri "http://localhost:8080/health" -UseBasicParsing
```

### Session找不到
- 确认Session ID正确：`production-scheduler-1769613594`
- 检查任务是否已提交成功
- 查看终端输出的实际Session ID

### 数据不更新
- 刷新桌面应用
- 检查SSE连接是否正常
- 重启桌面应用

---

## 📞 获取帮助

- 文档：https://docs.shannon.run
- GitHub：https://github.com/Kocoro-lab/Shannon
- 问题反馈：提交 GitHub Issue
