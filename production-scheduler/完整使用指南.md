# 🚀 Shannon 生产调度系统 - 完整可视化演示指南

## 当前状态

✅ 系统已准备好，正在初始化数据库...

Docker正在重建所有容器，完成后会自动初始化PostgreSQL数据库并创建所需的`sessions`表。

## 完整的启动步骤

### 第1步：等待Docker初始化完成
```powershell
# 监控Docker构建进度
docker compose logs -f
```

**预计时间**: 3-5分钟  
**完成标志**: 所有服务状态为 `Up` 或 `Healthy`

### 第2步：验证服务启动
```powershell
# 检查所有容器
docker ps

# 或者检查健康状态
curl http://localhost:8080/health
```

### 第3步：运行演示脚本

**方式A（推荐）：自动启动脚本**
```powershell
cd c:\Users\Administrator\Documents\GitHub\Shannon\production-scheduler
python auto_start.py
```

这个脚本会：
1. ✅ 自动等待Docker完全启动
2. ✅ 自动等待API服务就绪
3. ✅ 自动创建并运行演示任务
4. ✅ 显示可视化链接

**方式B（手动）：逐步运行**
```powershell
$env:PYTHONIOENCODING="utf-8"
cd c:\Users\Administrator\Documents\GitHub\Shannon\production-scheduler
python run_demo.py
```

### 第4步：在Web UI中查看演示

演示启动后，你会看到：
- `Session ID`: 用于跟踪整个演示的唯一标识符
- `Task ID`: 单个任务的标识符

#### 使用 Temporal UI 查看（推荐用于工作流细节）
```
🔗 http://localhost:8088
```
- 搜索你的 `Task ID`
- 查看完整的工作流执行时间线
- 看到每个Agent的输入/输出
- 查看失败原因（如果有）

#### 使用 Shannon Web UI 查看（推荐用于任务管理）
```
🔗 http://localhost:3000
```
- 点击"我的代理人们"或"Sessions"
- 搜索你的 `Session ID`
- 实时看到所有任务的状态
- 查看费用和Token使用
- 实时输出日志

## 演示包含的6个AI Agent

### 1. 🤖 订单分析师
**职责**: 分析订单特征和优先级
- 分析3个订单（紧急、普通、非紧急）
- 评估生产难度
- 排列优先级

### 2. 🤖 设备规划师  
**职责**: 制定设备分配方案
- 分配4条生产线
- 计算产能和时间
- 优化生产计划

### 3. 🤖 物流协调员
**职责**: 检查库存并计划采购
- 检查4种原材料库存
- 计算所需材料
- 评估采购需求

### 4. 🤖 质量检查员
**职责**: 制定质量控制计划
- 制定检查标准
- 计划检查频率
- 提出改进方案

### 5. 🤖 成本分析师
**职责**: 分析成本和利润
- 计算总成本
- 评估利润率  
- 提出优化建议

### 6. 🤖 总调度师
**职责**: 综合所有分析制定最终方案
- 综合所有分析结果
- 生成最终调度方案
- 输出完整生产计划

## 预期的执行流程图

```
开始
 │
 ├─→ 订单分析师 (1-2分钟)
 │    ├─ 分析订单
 │    └─ 排列优先级
 │
 ├─→ 设备规划师 (1-2分钟)
 │    ├─ 分配设备
 │    └─ 计算产能
 │
 ├─→ 物流协调员 (1分钟)
 │    ├─ 检查库存
 │    └─ 评估采购
 │
 ├─→ 质量检查员 (1分钟)
 │    ├─ 制定质控
 │    └─ 确定标准
 │
 ├─→ 成本分析师 (1分钟)
 │    ├─ 计算成本
 │    └─ 评估利润
 │
 └─→ 总调度师 (1-2分钟)
      ├─ 综合分析
      └─ 生成方案

完成 (总耗时 5-10分钟)
```

## 故障排除

### Docker服务未启动
```powershell
# 检查compose文件
cd c:\Users\Administrator\Documents\GitHub\Shannon\deploy\compose
dir docker-compose.yml

# 手动启动
docker compose up -d

# 查看日志
docker compose logs
```

### API服务无响应
```powershell
# 检查容器状态
docker ps | Select-String shannon-gateway

# 查看日志
docker logs shannon-gateway-1

# 检查端口
netstat -ano | findstr 8080
```

### 数据库连接失败
```powershell
# 检查PostgreSQL
docker logs shannon-postgres-1

# 连接数据库
docker exec -it shannon-postgres-1 psql -U shannon -d shannon -c "\dt"
```

## 性能监控

在演示运行期间，可以在Grafana中监控：

**地址**: http://localhost:3030
- 用户名: `admin`
- 密码: `admin`

### 查看以下指标：
- 🔄 API调用次数和延迟
- 💾 内存和CPU使用
- 📊 Token消费统计
- 💰 成本跟踪
- 🔴 错误率

## 下一步建议

✅ 演示完成后，你可以：

1. **修改演示参数**
   - 编辑 `run_demo.py` 中的订单数量/设备数量
   - 改变优先级或成本限制
   - 添加新的约束条件

2. **集成到你的系统**
   - 使用Shannon API集成到现有系统
   - 开发自定义Agent
   - 创建定时任务

3. **深入学习**
   - 阅读API文档: https://docs.shannon.run
   - 查看源码: https://github.com/Kocoro-lab/Shannon
   - 参加讨论: GitHub Issues

## 快速命令参考

```powershell
# 启动所有服务
docker compose up -d

# 停止所有服务
docker compose down

# 查看日志
docker compose logs -f [service-name]

# 重启特定服务
docker compose restart shannon-gateway-1

# 清理所有数据（重置系统）
docker compose down -v

# 查看所有容器
docker ps -a

# 进入容器
docker exec -it [container-name] bash
```

## 需要帮助?

- 📖 文档: https://docs.shannon.run
- 🐛 提交Bug: GitHub Issues  
- 💬 讨论: GitHub Discussions
- 📧 邮件: 见项目README

---

**现在开始演示吧！** 🚀
