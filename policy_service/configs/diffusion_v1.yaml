# Diffusion Policy 训练配置 v1

# 模型配置
model:
  max_robots: 10
  max_jobs: 50
  max_stations: 20
  robot_feat_dim: 8  # [x, y, status, battery, load, ...]
  job_feat_dim: 8    # [x_src, y_src, x_tgt, y_tgt, deadline, priority, ...]
  station_feat_dim: 6  # [x, y, type, available, ...]
  hidden_dim: 256
  num_layers: 4
  num_heads: 4
  dropout: 0.1
  num_diffusion_steps: 10  # 扩散步数（推理时迭代次数）

# 数据配置
data:
  train_path: "./data/episodes/train"  # 训练数据目录或文件
  val_path: "./data/episodes/val"      # 验证数据（可选）
  # 数据格式：JSONL 或 JSON
  # 每个 step: {"obs": {...}, "action": [...], "reward": ..., "done": ...}

# 训练配置
training:
  batch_size: 64
  num_epochs: 100
  lr: 3.0e-4
  lr_min: 1.0e-6
  weight_decay: 1.0e-5
  grad_clip: 1.0
  num_workers: 4
  checkpoint_dir: "./checkpoints"
  
  # Early stopping
  patience: 10
  min_delta: 1.0e-4

# 推理配置
inference:
  num_candidates: 5      # 默认采样候选数
  temperature: 1.0       # 采样温度
  guidance_scale: 1.0    # 引导强度（v2+）
  seed: null             # 随机种子（null = 随机）

# 日志配置
logging:
  log_dir: "./logs"
  log_interval: 10       # 每 N 个 batch 打印一次
  save_interval: 5       # 每 N 个 epoch 保存一次
